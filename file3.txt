openapi: 3.0.0
info:
  title: Fraud Exclusions Management API
  description: |
    The purpose of this API is to update, replace, or delete fraud exclusions.
  contact:
    name: Doozers
    email: Doozers@fisglobal.com
  license:
    name: FIS Proprietary
  version: 1.0.0
servers:
  - url: unknown
paths:
  /query/fraudexclusionshistroy:
    post:
      summary: return all history exclusions associated with a card
      operationId: searchHistory
      description: fetches fraud exclusions from the system
      responses:
        '200':
           description: a list of exclusions
           content:
             application/json:
               schema:          
                 $ref: '#/components/schemas/FraudExclusionResponse'
        '400':
          description: 'invalid input, object invalid'        
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FraudExclusionRequestItem'
        description: Fetches one or more items based on criteria   
  /query/exclusions:
    post:
      summary: return all active (current and future) travel associated with a card
      operationId: search
      description: fetches fraud travel from the system
	  "parameters": [
         {
            "name": "uuid",
            "in": "header",
            "description": "Uniquie indentifier for the request",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "maxLength": 36,
              "minLength": 36,
              "pattern": "[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}",
              "type": "string",
              "example": "35fb301b-187f-4162-ac51-3d78109162cd"
            }
          },
          {
            "name": "switch-id",
            "in": "header",
            "description": "switch id",
            "required": true,
            "style": "simple",
            "explode": false,
            "schema": {
              "maxLength": 10,
              "minLength": 4,
              "type": "string",
              "example": "FISB"
            }
          }
        ],
      responses:
        '200':
           description: a list of travel
           content:
             application/json:
               schema:          
                 $ref: '#/components/schemas/FraudExclusionResponse'
        '400':
          description: 'invalid input, object nvalid'        
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FraudExclusionRequestItem'
        description: Fetches one or more items based on criteria
  /query/exclusionshistory:
    post:
      summary: return all active (current and future) travel associated with a card
      operationId: search history
      description: fetches fraud travel from the system
      responses:
        '200':
           description: a list of travel
           content:
             application/json:
               schema:          
                 $ref: '#/components/schemas/FraudExclusionResponse'
        '400':
          description: 'invalid input, object nvalid'        
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FraudExclusionRequestItem'
        description: Fetches one or more items based on criteria      
  /query/exclusionactivecount:
    post:
      summary: return number of active records for given search
      operationId: searches active count
      description: fetches count from the system for given input
      responses:
        '200':
           description: a list of travels
           content:
             application/json:
               schema:
                 type: object
                 properties: 
                   count: 
                    type: integer
                    example: 1000
        '400':
          description: 'invalid input, object invalid'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FraudExclusionRequestItem'
        description: Fetches the active count of  items based on criteria  
  /fraudexclusion:
    post:
      tags:
        - Fraud Exclusion Management API
      summary: Adds one fraud exclusion
      description: Adds one fraud exclusion to a specific card.
      parameters:
        - in: header
          name: uuid
          description: Uniquie indentifier for the request
          schema:
            type: string
            example: 35fb301b-187f-4162-ac51-3d78109162cd
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddExclusionRequest"
            examples:
              sample:
                summary: Sample Request
                value:
                  {
                    "pan": { "plainText": "1616100000010004" },
                    "exclusionType": "",
                    "countryCode": "",
                    "stateCode": "",
                    "MCC": "",
                    "startDate": "2019-11-08:14:12:03.130000",
                    "endDate": "2019-11-08:14:12:03.130000",
                    "addedByUser": "",
                    "portfolio": "FIB1840254029",
                  }
      responses:
        200:
          description: Exclusion successfully added
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AddExclusionResponse"
              examples:
                sample:
                  summary: Sample Response
                  value:
                    {
                      "entity": { "exclusionId": "" },
                      "metadata":
                        { "msgLst": [{ "code": "00", "text": "SUCCESS" }] },
                    }
  /fraudexclusion/{exclusionid}:
    patch:
      tags:
        - Fraud Exclusion Management API
      summary: Update any information in an api.
      description: |
        This will allow you to Update existing exclusion
      parameters:
        - in: header
          name: uuid
          description: Uniquie indentifier for the request
          schema:
            type: string
            example: 35fb301b-187f-4162-ac51-3d78109162cd
        - in: path
          name: exclusionid
          schema:
            type: string
            example: 123415123123
          description: The ID of the exclusion to be updated
          required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateExclusionRequest"
            examples:
              sample1:
                summary: Sample Request
                value:
                  {
                    "pan": { "plainText": "1616100000010004" },
                    "exclusionType": "",
                    "countryCode": "",
                    "stateCode": "",
                    "MCC": "",
                    "startDate": "2019-11-08:14:12:03.130000",
                    "endDate": "2019-11-08:14:12:03.130000",
                    "lastUpdatedUser": "",
                    "portfolio": "FIB1840254029",
                  }
      responses:
        200:
          description: Exclusion successfully updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpdateExclusionResponse"
              examples:
                sample1:
                  summary: Sample Response
                  value:
                    {
                      "entity": {},
                      "metadata":
                        { "msgLst": [{ "code": "00", "text": "SUCCESS" }] },
                    }
    delete:
      tags:
        - Fraud Exclusion Management API
      summary: Delete a fraud exclusion
      description: Delete a fraud exclusion by ID
      parameters:
        - in: header
          name: uuid
          description: Uniquie indentifier for the request
          schema:
            type: string
            example: 35fb301b-187f-4162-ac51-3d78109162cd
        - in: path
          name: exclusionid
          schema:
            type: string
            example: 123415123123
          description: The ID of the exclusion to be deleted
          required: true
        - in: query
          name: deletedUserId
          schema:
            type: string
            example: someuser
          description: the user who deleted the excl
          required: true
      responses:
        200:
          description: Exclusion successfully deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteExclusionResponse"
components:
  schemas:
    FraudExclusionRequestPayload:
      type: object
      required:
        - pan
        - portfolio
        - exclusionType
        - exclusionValue
        - startDate
        - endDate
      properties:
        pan:          
          type: string
          example: '545354534534455'
        portfolio:
          type: string
          maximum: 14
          example: 'FIB1234567890'
        exclusionType:
          type: string
          enum:
            - 'M'
            - 'S'
            - 'C'
            - 'V'            
          maximum: 1
          example: 'M'
        MCC:
          type: string
          maximum: 4
          example: '0780'
        countryCode:
          type: string
          maximum: 3
          example: '020'
        stateCode:
          type: string
          maximum: 2
          example: 'AB'
        startDate:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'From Date means starting the date range from the beginning of that day 00:00:00 AM and format is yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-19:21:54:16'       
        endDate:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'From Date means starting the date range from the beginning of that day 12:00:00 AM and format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-21:21:54:16'
        addedByUser:
          type: string
          maximum: 9
          example: 'venkat'
    FraudExclusionResponse:
      type: object
      properties:        
        total:
          type: integer
          example: 2000
        exclusions:
          type: array
          items: 
            $ref: '#/components/schemas/FraudExclusionResponseItem'
    FraudExclusionResponseItem:
      type: object           
      properties:
        pan:
          type: string
          example: '545354534534455'
		portfolio:
		  type: string
		  maximum: 14
          example: 'FIB1234567890'
        segmentID:
          type: string
          maximum: 1
          enum: 
            - '1'
            - '2'
            - '3'
            - '4'
            - '5'
          example: '1'
        segmentValue:
          type: string
          maximum: 1
          example: 'S'
        startDate:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{4}'
          description: 'Date format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-19:21:54:16'
        endDate:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{4}'
          description: 'Date format is  yyyy-MM-dd:HH24:mm:ss.SSSS'
          example: '2023-05-21:21:54:16.3451'
        addedByUser:
          type: string
          maximum: 9
          example: 'venkat'
		lastAction:
		  type: string
		  maximum: 1
		  example: 'I'
		  enum:
		    - 'I'
			- 'U'
			- 'D'
		lastActionDateTime:
		  type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{4}'
          description: 'Date format is  yyyy-MM-dd:HH24:mm:ss.SSSS'
          example: '2023-05-21:21:54:16.3451'
    FraudExclusionRequestItem:
      type: object
      required:
        - portfolio
        - pageNumber
        - pageSize       
      properties:
        pan:          
          type: string
          example: '545354534534455'
        portfolio:
          type: string
          maximum: 14
          example: 'FIB1234567890'
        exclusionType:
          type: string
          enum:
            - 'M'
            - 'S'
            - 'C'
            - 'V'            
          maximum: 1
          example: 'M-MCC , S-State , C-Country and V-VIP'
        startDateFrom:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'From Date means starting the date range from the beginning of that day 12:00:00 AM and format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-19:21:54:16'
        startDateTo:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'To Date means ending the range on that day 11:59:59PM and format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-21:21:54:16'
        endDateFrom:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'From Date means starting the date range from the beginning of that day 12:00:00 AM and format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-19:21:54:16'
        endDateTo:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'From Date means starting the date range from the beginning of that day 12:00:00 AM and format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-21:21:54:16'
        addedByUser:
          type: string
          maximum: 9
          example: 'venkat'
        pageNumber: 
          type: number
          description: page number to retrieve the records matching given criteria
          example: greater than equal to 0
        pageSize:
          type: number
          description: number records to be return per page
          example: 100    
    FraudExclusionResponseItem:
      type: object           
      properties:
        pan:
          type: string
          example: '545354534534455'        
        travelID:
          type: string
          maximum: 1
          enum: 
            - 'M'
            - 'S'
            - 'C'
            - 'V'            
          example: 'M'
        travelValue:
          type: string
          maximum: 1
          example: 'M'
        startDate:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'Date format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-19:21:54:16'
        endDate:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'Date format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-21:21:54:16'
        addedByUser:
          type: string
          maximum: 9
          example: 'venkat'
    FraudExclusionEndRequestPayload:
      type: object
      properties:
        portfolio:
          type: string
          maximum: 14
          example: 'FIB1234567890'
        travelID:
          type: string
          maximum: 1
          enum: 
            - '1'
            - '2'
            - '3'
            - '4'
            - '5'
          example: '1'
        endDate:
          type: string
          maximum: 18
		  pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]{2}'
          description: 'Date format is  yyyy-MM-dd:HH24:mm:ss'
          example: '2023-05-21:21:54:16'
    FraudExclusionDel:
      type: object
      properties:
        exclusionID:
          type: string
          maximum: 15
          example: '168544940218300'
        userID:
          type: string
          maximum: 9
          example: 'venkat'
    AddExclusionRequest:
      type: object
      description: Request adding an exclusion
      properties:
        pan:
          $ref: "#/components/schemas/PAN"
        exclusionType:
          type: string
          description: |
            The type of the exclusion to delete.
            <dl>
              <dt>CC</dt><dd>Country CODE</dd>
              <dt>SC</dt><dd>State CODE</dd>
              <dt>MCC</dt><dd>Merchange Category Code</dd>
            </dl>
          maxLength: 3
        countryCode:
          type: string
          default: false
          description: "Country Code"
        stateCode:
          type: string
          description: "State Code"
        MCC:
          type: string
          description: Merchant Category Code
        startDate:
          type: string
        endDate:
          type: string
        addedByUser:
          type: string
      required:
        - pan
        - exclusionType
        - startDate
        - endDate
        - addedByUser
    UpdateExclusionRequest:
      type: object
      properties:
        exclusionType:
          type: string
          description: |
            The type of the exclusion to delete.
            <dl>
              <dt>CC</dt><dd>Country CODE</dd>
              <dt>SC</dt><dd>State CODE</dd>
              <dt>MCC</dt><dd>Merchange Category Code</dd>
            </dl>
          maxLength: 3
        pan:
          $ref: "#/components/schemas/PAN"
        countryCode:
          type: string
          default: false
          description: "Country Code"
        stateCode:
          type: string
          description: State Code
        MCC:
          type: string
          description: Merchant Category Code
        startDate:
          type: string
        endDate:
          type: string
        lastUpdatedUser:
          type: string
      required:
        - pan
        - exclusionType
        - startDate
        - endDate
        - lastUpdatedUser

    AddExclusionResponse:
      type: object
      description: Response for adding an exclusion
      properties:
        exclusionId:
          type: string
          description: |
            Key of the exclusion that was added.
        metadata:
          $ref: "#/components/schemas/Metadata"

    UpdateExclusionResponse:
      type: object
      description: Response for updating an exclusion
      properties:
        metadata:
          $ref: "#/components/schemas/Metadata"
    DeleteExclusionResponse:
      type: object
      description: Response for deleting an exclusion
      properties:
        metadata:
          $ref: "#/components/schemas/Metadata"
    PAN:
      type: object
      description: "Primary account number aka Card number aka Card account number."
      properties:
        plainText:
          type: string
          description: "Plain-text PAN."
        cipherText:
          type: string
          description: "Compact-serialzed JWE Object."
        alias:
          type: string
          description: "Proxy for PAN.  This property is only valid in certain cases."

    Metadata:
      type: object
      properties:
        msgLst:
          description: Contains multiple messages.  Will always contain at least one message.
          type: array
          items:
            $ref: "#/components/schemas/Message"

    Message:
      type: object
      properties:
        code:
          type: string
          description: API execution status. <code>00</code> for success.
        text:
          type: string
          description: API execution status description <code>SUCCESS</code> for success.
        type:
          type: string
          description: "Error response type. Null or Empty for 200 OK response"
          enum:
            - APPLICATION_ERROR
            - SYSTEM_ERROR
            - VALIDATION_ERROR
        severity:
          type: string
          description: "API response critical errors. Null or Empty for 200 OK response"
          enum:
            - None
            - Info
            - Warning
            - Fatal
            - Error

